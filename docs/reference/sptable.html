<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert from various forms to a table. — sptable.SpatialPolygons • spbabel</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Convert from various forms to a table. — sptable.SpatialPolygons" />

<meta property="og:description" content="Decompose a Spatial or sf object to a single table structured as a row for every coordinate in all the sub-geometries, including duplicated coordinates that close polygonal rings, close lines and shared vertices between objects." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spbabel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/spbabel.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/sfbabel.html">Speaking Simple Features</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert from various forms to a table.</h1>
    
    <div class="hidden name"><code>sptable.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Decompose a <code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial</a></code> or <code><a href='https://www.rdocumentation.org/packages/sf/topics/sf'>sf</a></code> object to a single table structured as a row for every coordinate in all the sub-geometries, including duplicated coordinates that close polygonal rings, close lines and shared vertices between objects.</p>
    
    </div>

    <pre class="usage"><span class='co'># S3 method for SpatialPolygons</span>
<span class='fu'>sptable</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for SpatialLines</span>
<span class='fu'>sptable</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for SpatialPointsDataFrame</span>
<span class='fu'>sptable</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for SpatialMultiPointsDataFrame</span>
<span class='fu'>sptable</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='fu'>sptable</span>(<span class='no'>object</span>) <span class='kw'>&lt;-</span> <span class='no'>value</span>

<span class='fu'>sptable</span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for trip</span>
<span class='fu'><a href='map_table.html'>map_table</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code><a href='https://www.rdocumentation.org/packages/sp/topics/Spatial-class'>Spatial</a></code> object</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>Spatial object</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>modified sptable version of object</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Spatial object</p>
<p><code><a href='https://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></code>  with columns</p><ul>
<li><p>SpatialPolygonsDataFrame "object_"   "branch_"   "island_"   "order_" "x"    "y_"</p></li>
<li><p>SpatialLinesDataFrame "object_"   "branch_" "order_"  "x_"      "y_"</p></li>
<li><p>SpatialPointsDataFrame  "object_" x_"      "y_"</p></li>
<li><p>SpatialMultiPointsDataFrame "object_" "branch_" "x_" "y_"</p></li>
<li><p>sf some combination of the above</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Input can be a of type <code><a href='https://www.rdocumentation.org/packages/sf/topics/sf'>sf</a></code> <code><a href='https://www.rdocumentation.org/packages/sp/topics/SpatialPolygons'>SpatialPolygonsDataFrame</a></code>, <code><a href='https://www.rdocumentation.org/packages/sp/topics/SpatialLines'>SpatialLinesDataFrame</a></code>, <code><a href='https://www.rdocumentation.org/packages/sp/topics/SpatialMultiPoints'>SpatialMultiPointsDataFrame</a></code> or a <code><a href='https://www.rdocumentation.org/packages/sp/topics/SpatialPoints'>SpatialPointsDataFrame</a></code>.
For simplicity <code>sptable</code> and its inverses <code>sp</code> and <code>sf</code> assume that all geometry can be encoded with object, branch, island, order, x and y. 
and that the type of topology is identified by which of these are present.</p>
<p>For simple features objects with mixed types of topology the result is consistent, but probably not useful. 
Columns that aren't present in one type will be present, padded with NA. (This is work in progress).</p>
<p>This is analogous to the following but in spbabel provides a consistent way to round-trip back to Spatial classes and other forms.</p><ul>
<li><p><code><a href='https://www.rdocumentation.org/packages/broom/topics/sp_tidiers'>sp_tidiers</a></code> (replacement of 'ggplot2::fortify').</p></li>
<li><p><code><a href='https://www.rdocumentation.org/packages/raster/topics/geom'>geom</a></code></p></li>
<li><p><code><a href='https://www.rdocumentation.org/packages/sp/topics/SpatialPolygonsDataFrame-class'>SpatialPolygonsDataFrame-class</a></code> with its 'as(as(x, "SpatialLinesDataFrame"), "SpatialPointsDataFrame")' work flow.</p></li>
</ul>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>## holey is a decomposed SpatialPolygonsDataFrame</span>
<span class='no'>spdata</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='sp.html'>sp</a></span>(<span class='no'>holey</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>sp</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>spdata</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/grDevices/topics/palettes'>rainbow</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/nrow'>nrow</a></span>(<span class='no'>spdata</span>), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.4</span>))</div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/points'>points</a></span>(<span class='no'>holey</span>$<span class='no'>x_</span>, <span class='no'>holey</span>$<span class='no'>y_</span>, <span class='kw'>cex</span> <span class='kw'>=</span> <span class='fl'>4</span>)</div><div class='input'><span class='no'>holes</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/subset'>subset</a></span>(<span class='no'>holey</span>, !<span class='no'>island_</span>)
<span class='co'>## add the points that only belong to holes</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/points'>points</a></span>(<span class='no'>holes</span>$<span class='no'>x_</span>, <span class='no'>holes</span>$<span class='no'>y_</span>, <span class='kw'>pch</span> <span class='kw'>=</span> <span class='st'>"+"</span>, <span class='kw'>cex</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='input'>
<span class='co'>## manipulate based on topology</span>
<span class='co'>## convert to not-holes</span>
<span class='no'>notahole</span> <span class='kw'>&lt;-</span> <span class='no'>holes</span>
<span class='no'>notahole</span>$<span class='no'>island_</span> <span class='kw'>&lt;-</span> <span class='fl'>TRUE</span>
<span class='co'>#also convert to singular objects - note that this now means we have an overlapping pair of polys</span>
<span class='co'>#because the door had a hole filled by another object</span>
<span class='no'>notahole</span>$<span class='no'>object_</span> <span class='kw'>&lt;-</span> <span class='no'>notahole</span>$<span class='no'>branch_</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='fu'><a href='sp.html'>sp</a></span>(<span class='no'>notahole</span>), <span class='kw'>add</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>col</span> <span class='kw'>=</span> <span class='st'>"red"</span>)</div><div class='img'><img src='sptable-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'>## example using in-place modification with sptable&lt;-</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>maptools</span>)</div><div class='output co'>#&gt; <span class='message'>Checking rgeos availability: TRUE</span></div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/utils/topics/data'>data</a></span>(<span class='no'>wrld_simpl</span>)
<span class='no'>spdata2</span> <span class='kw'>&lt;-</span> <span class='no'>spdata</span>
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>dplyr</span>)
<span class='co'>## modify the geometry on this object without separating the vertices from the objects</span>
<span class='fu'>sptable</span>(<span class='no'>spdata2</span>) <span class='kw'>&lt;-</span> <span class='fu'>sptable</span>(<span class='no'>spdata2</span>) <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>x_</span> <span class='kw'>=</span> <span class='no'>x_</span> + <span class='fl'>10</span>, <span class='kw'>y_</span> <span class='kw'>=</span> <span class='no'>y_</span> + <span class='fl'>5</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

